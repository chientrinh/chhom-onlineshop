<?php
/**
 * $URL: http://tarax.toyouke.com/svn/MALL/frontend/config/main.php $
 * $Id: main.php 2922 2016-10-05 06:48:15Z mori $
 */

$params = array_merge(
    require(__DIR__ . '/../../common/config/params.php'),
    require(__DIR__ . '/../../common/config/params-local.php'),
    require(__DIR__ . '/params.php'),
    require(__DIR__ . '/params-local.php')
);

return [
    'layout' => 'echom-main',
    'id'                  => 'echom-frontend',
    'basePath'            => dirname(__DIR__),
    'controllerNamespace' => 'frontend\controllers',
    'bootstrap'           => ['log'],
    'components'          => [
        'db' => [
            'username' => 'yii_front',
            'password' => '',
        ],
        'ysd' => [
            'username' => 'yii_front',
            'password' => '',
        ],
        'urlManager' => [
            'class' => 'yii\web\UrlManager',
            'scriptUrl'  => '/index.php',
            'showScriptName' => false,
            'enablePrettyUrl' => true,
            'rules'           => [
                '<action:login|logout>' => 'site/<action>',
                ['pattern' => '<module>/<controller>/<id:\d+>/<page:.*>',
                 'route'   => '<module>/<controller>/view',
                 'encodeParams' => false,
                ],
                '<controller>/<id:\d+>'             => '<controller>/view',
                'category/<name>'                   => 'category/viewbyname',
                'cart/<action>'                     => 'cart/default/<action>',
            ],
        ],
        'assetManager' => [
            'bundles' => [
                'yii\bootstrap\BootstrapAsset' => [
                    'sourcePath' => '@app/assets',
                    'css'        => ['bootstrap.css'],
                ],
            ],
        ],
        'session' => [
            'class'        => 'yii\web\DbSession',
            'name'         => 'TYMALLSESSID',
            'db'           => 'db',  // the application component ID of the DB connection. Defaults to 'db'.
            'sessionTable' => 'wtb_session',
            'timeout'      => 60 * 60 * 5, // 5 hour
        ],
        'view' => [
            'theme' => [
                'pathMap' => ['@app/views' => 'themes/ty-magazine'],
                'baseUrl' => 'themes/ty-magazine',
            ],
        ],
        'user'            => [
            'identityClass'   => 'common\models\Customer',
            'enableAutoLogin' => false,
            'enableSession'   => true,
        ],
        'errorHandler' => [
            'errorAction' => 'site/error',
        ],
    ],
    'modules'             => [
        'cart' => [
            'class' => 'frontend\modules\cart\Module',
        ],
        'profile' => [
            'class' => 'frontend\modules\profile\Module',
            'components' => [
                'ysdConnection' => [
                    'class' => \common\components\ysd\RrqConnection::className(),
                    'url'   => 'https://www.web-koufuri.com/webgw_ml/WRP01010Action_doBatInit.action',//本番環境
                    'corpcd'   => '50803',
                    'svcno'    => '004',
                    'password' => '6ffdb60c',
                ],
            ]
        ],
    ],
    'params' => $params,
];
